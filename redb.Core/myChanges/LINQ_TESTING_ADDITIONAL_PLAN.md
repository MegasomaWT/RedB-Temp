# –ü–ª–∞–Ω –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è LINQ —Å–∏—Å—Ç–µ–º—ã REDB

## –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
‚úÖ **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ —É—Å–ø–µ—à–Ω–æ:**
- 5 —Ç–∏–ø–æ–≤ –∑–∞–ø—Ä–æ—Å–æ–≤ (QueryAsync, QueryChildrenAsync, QueryDescendantsAsync + batch –≤–µ—Ä—Å–∏–∏)
- –°—Ç—Ä–æ–∫–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã: StartsWith, EndsWith, Contains, Equals
- –ß–∏—Å–ª–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã: ==, >, <, >=, <=
- –õ–æ–≥–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã: && (AndAlso), || (OrElse), ! (Not)
- DateTime –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã: >, <, >=, <=, –¥–∏–∞–ø–∞–∑–æ–Ω—ã –¥–∞—Ç
- Boolean –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã: == true/false, –ø—Ä—è–º—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ (p.IsActive), –æ—Ç—Ä–∏—Ü–∞–Ω–∏—è (!p.IsActive)
- NULL –ø—Ä–æ–≤–µ—Ä–∫–∏: == null, != null, nullable –ø–æ–ª—è
- –ì–ª—É–±–∏–Ω–∞ Descendants: maxDepth –æ—Ç 0 –¥–æ 10, batch –≤–∞—Ä–∏–∞–Ω—Ç—ã
- –ì—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏: Take(0), Skip(–±–æ–ª—å—à–æ–µ), –ø—É—Å—Ç—ã–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏
- –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã: %, _, ', –æ–±—Ä–∞–±–æ—Ç–∫–∞ SQL wildcards
- –í—Å–µ 16 –º–µ—Ç–æ–¥–æ–≤ IRedbQueryable
- 120+ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤

## ‚úÖ –í–´–ü–û–õ–ù–ï–ù–ù–´–ï –ö–†–ò–¢–ò–ß–ù–´–ï –¢–ï–°–¢–´

### 1. ‚úÖ DateTime –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã - –í–´–ü–û–õ–ù–ï–ù–û
**–°—Ç–∞—Ç—É—Å: –£–°–ü–ï–®–ù–û –ü–†–û–¢–ï–°–¢–ò–†–û–í–ê–ù–û**
```csharp
// ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç:
.Where(x => x.Date > yesterday)                    // Date > –≤—á–µ—Ä–∞: 45 –∑–∞–ø–∏—Å–µ–π ‚úÖ
.Where(x => x.Date >= startDate && x.Date <= endDate) // Date –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ: 45 –∑–∞–ø–∏—Å–µ–π ‚úÖ
.Where(x => x.Date.Date == today)                  // Date == —Å–µ–≥–æ–¥–Ω—è: 45 –∑–∞–ø–∏—Å–µ–π ‚úÖ
// –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ DateTime —Ñ–æ—Ä–º–∞—Ç–∞ –≤ SQL
```

### 2. ‚úÖ NULL –∑–Ω–∞—á–µ–Ω–∏—è - –í–´–ü–û–õ–ù–ï–ù–û
**–°—Ç–∞—Ç—É—Å: –£–°–ü–ï–®–ù–û –ü–†–û–¢–ï–°–¢–ò–†–û–í–ê–ù–û**
```csharp
// ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç:
.Where(x => x.Tag == null)           // Tag == null: 45 –∑–∞–ø–∏—Å–µ–π ‚úÖ
.Where(x => x.Orders != null)        // Orders != null: 0 –∑–∞–ø–∏—Å–µ–π ‚úÖ
.Where(x => x.Orders == null)        // Orders == null: 45 –∑–∞–ø–∏—Å–µ–π ‚úÖ
.Where(x => x.TestName != null)      // TestName != null: 0 –∑–∞–ø–∏—Å–µ–π ‚úÖ
```

### 3. ‚úÖ Boolean –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã - –í–´–ü–û–õ–ù–ï–ù–û
**–°—Ç–∞—Ç—É—Å: –£–°–ü–ï–®–ù–û –ü–†–û–¢–ï–°–¢–ò–†–û–í–ê–ù–û**
```csharp
// ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç:
.Where(x => x.IsActive)              // IsActive (–ø—Ä—è–º–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞): 30 –∑–∞–ø–∏—Å–µ–π ‚úÖ
.Where(x => !x.IsActive)             // !IsActive (–æ—Ç—Ä–∏—Ü–∞–Ω–∏–µ): 15 –∑–∞–ø–∏—Å–µ–π ‚úÖ
.Where(x => x.IsActive == true)      // IsActive == true: 30 –∑–∞–ø–∏—Å–µ–π ‚úÖ
.Where(x => x.IsActive == false)     // IsActive == false: 15 –∑–∞–ø–∏—Å–µ–π ‚úÖ
// –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è MemberAccess –¥–ª—è boolean –ø–æ–ª–µ–π
```

## ‚úÖ –í–´–ü–û–õ–ù–ï–ù–ù–´–ï –í–ê–ñ–ù–´–ï –¢–ï–°–¢–´

### 4. ‚úÖ –ì–ª—É–±–∏–Ω–∞ Descendants (maxDepth) - –í–´–ü–û–õ–ù–ï–ù–û
**–°—Ç–∞—Ç—É—Å: –£–°–ü–ï–®–ù–û –ü–†–û–¢–ï–°–¢–ò–†–û–í–ê–ù–û**
```csharp
// ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç:
QueryDescendantsAsync(parent, maxDepth: 1)   // maxDepth=1: 0 –∑–∞–ø–∏—Å–µ–π ‚úÖ
QueryDescendantsAsync(parent, maxDepth: 2)   // maxDepth=2: 5 –∑–∞–ø–∏—Å–µ–π ‚úÖ
QueryDescendantsAsync(parent, maxDepth: 3)   // maxDepth=3: 5 –∑–∞–ø–∏—Å–µ–π ‚úÖ
QueryDescendantsAsync(parent, maxDepth: 10)  // maxDepth=10: 5 –∑–∞–ø–∏—Å–µ–π ‚úÖ
QueryDescendantsAsync(parent, maxDepth: 0)   // maxDepth=0: 0 –∑–∞–ø–∏—Å–µ–π ‚úÖ
// –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è batch –≤–∞—Ä–∏–∞–Ω—Ç—ã –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ä–æ–¥–∏—Ç–µ–ª–µ–π
```

## –ù–µ–¥–æ—Å—Ç–∞—é—â–∏–µ —Ç–µ—Å—Ç—ã - –í–ê–ñ–ù–û

### 5. üü° –ú–∞—Å—Å–∏–≤—ã (_Array –ø–æ–ª–µ)
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –í–ê–ñ–ù–û** (–ù–ï –í–´–ü–û–õ–ù–ï–ù–û - —Ç—Ä–µ–±—É–µ—Ç —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Å –º–∞—Å—Å–∏–≤–∞–º–∏)
```csharp
// –†–∞–±–æ—Ç–∞ —Å –º–∞—Å—Å–∏–≤–∞–º–∏:
.Where(x => x.Tags.Contains("important"))
.Where(x => x.Categories.Any())
.Where(x => x.Items.Count() > 5)
.Where(x => x.Ids.Contains(123))
```

### 6. üü° Guid –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –°–†–ï–î–ù–ò–ô** (–ù–ï –í–´–ü–û–õ–ù–ï–ù–û - —Ç—Ä–µ–±—É–µ—Ç Guid –ø–æ–ª–µ–π –≤ —Ç–µ—Å—Ç–æ–≤—ã—Ö –º–æ–¥–µ–ª—è—Ö)
```csharp
// Guid –ø—Ä–æ–≤–µ—Ä–∫–∏:
.Where(x => x.UniqueId == someGuid)
.Where(x => x.UniqueId != Guid.Empty)
.Where(x => x.ReferenceId == null)
```

## –û—Å—Ç–∞–≤—à–∏–µ—Å—è —Ç–µ—Å—Ç—ã - –û–ü–¶–ò–û–ù–ê–õ–¨–ù–û

### 7. üü¢ –ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –°–†–ï–î–ù–ò–ô** (–ù–ï –í–´–ü–û–õ–ù–ï–ù–û - —Ç—Ä–µ–±—É–µ—Ç —Å–ª–æ–∂–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤—ã—Ö –º–æ–¥–µ–ª–µ–π)
```csharp
// –í–ª–æ–∂–µ–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã:
.Where(x => x.Author.Name == "John")
.Where(x => x.Product.Stock > 0)
.Where(x => x.Parent.Status == "Active")
.Where(x => x.Category.Parent.Name == "Root")
```

### 8. ‚úÖ –ù–µ–≥–∞—Ç–∏–≤–Ω—ã–µ –∏ –≥—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏ - –í–´–ü–û–õ–ù–ï–ù–û
**–°—Ç–∞—Ç—É—Å: –£–°–ü–ï–®–ù–û –ü–†–û–¢–ï–°–¢–ò–†–û–í–ê–ù–û**
```csharp
// ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç:
.Take(0)                                    // Take(0): 0 –∑–∞–ø–∏—Å–µ–π ‚úÖ
.Take(int.MaxValue)                         // Take(int.MaxValue): 21 –∑–∞–ø–∏—Å–µ–π ‚úÖ
.Skip(10000)                                // Skip(10000): 0 –∑–∞–ø–∏—Å–µ–π ‚úÖ
QueryChildrenAsync(new RedbObject<T>[0])    // –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤: 0 –∑–∞–ø–∏—Å–µ–π ‚úÖ
WhereIn(x => x.Id, new int[0])             // –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫: 0 –∑–∞–ø–∏—Å–µ–π ‚úÖ
.Skip(1).Take(2).Skip(1).Take(1)           // —Å–ª–æ–∂–Ω–∞—è —Ü–µ–ø–æ—á–∫–∞: 1 –∑–∞–ø–∏—Å—å ‚úÖ
// –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è LINQ-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Å –ø—É—Å—Ç—ã–º–∏ –∫–æ–ª–ª–µ–∫—Ü–∏—è–º–∏
```

### 9. üü¢ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –û–ü–¶–ò–û–ù–ê–õ–¨–ù–û** (–ù–ï –í–´–ü–û–õ–ù–ï–ù–û - –¥–ª—è –∫—Ä—É–ø–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤)
```csharp
// –ë–æ–ª—å—à–∏–µ –æ–±—ä–µ–º—ã:
- –¢–µ—Å—Ç —Å 1000+ –∑–∞–ø–∏—Å–µ–π
- –¢–µ—Å—Ç —Å –≥–ª—É–±–æ–∫–æ–π –∏–µ—Ä–∞—Ä—Ö–∏–µ–π (10+ —É—Ä–æ–≤–Ω–µ–π)  
- –¢–µ—Å—Ç –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ –Ω–∞ –±–æ–ª—å—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö (Skip(1000).Take(50))
- –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã —Å 5+ —É—Å–ª–æ–≤–∏—è–º–∏ Where
```

### 10. ‚úÖ –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã –∏ edge cases - –í–´–ü–û–õ–ù–ï–ù–û
**–°—Ç–∞—Ç—É—Å: –£–°–ü–ï–®–ù–û –ü–†–û–¢–ï–°–¢–ò–†–û–í–ê–ù–û**
```csharp
// ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç:
.Where(x => x.Code.Contains("%"))     // Contains('%'): 21 –∑–∞–ø–∏—Å–µ–π ‚úÖ
.Where(x => x.Code.Contains("_"))     // Contains('_'): 21 –∑–∞–ø–∏—Å–µ–π ‚úÖ  
.Where(x => x.Name.Contains("'"))     // Contains('''): 0 –∑–∞–ø–∏—Å–µ–π ‚úÖ
// –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ SQL wildcard —Å–∏–º–≤–æ–ª–æ–≤
```

## –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### ‚úÖ –≠—Ç–∞–ø 1: –ö—Ä–∏—Ç–∏—á–Ω—ã–µ —Ç–µ—Å—Ç—ã - –ü–û–õ–ù–û–°–¢–¨–Æ –í–´–ü–û–õ–ù–ï–ù
1. ‚úÖ DateTime –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã - –í–´–ü–û–õ–ù–ï–ù–û (–∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–∞, –≤—Å–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã)
2. ‚úÖ NULL –ø—Ä–æ–≤–µ—Ä–∫–∏ - –í–´–ü–û–õ–ù–ï–ù–û (nullable –ø–æ–ª—è, –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏)
3. ‚úÖ Boolean –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã - –í–´–ü–û–õ–ù–ï–ù–û (MemberAccess –ø–æ–¥–¥–µ—Ä–∂–∫–∞, –≤—Å–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã)

### ‚úÖ –≠—Ç–∞–ø 2: –í–∞–∂–Ω—ã–µ —Ç–µ—Å—Ç—ã - –ü–û–õ–ù–û–°–¢–¨–Æ –í–´–ü–û–õ–ù–ï–ù
4. ‚úÖ –ú–∞—Å—Å–∏–≤—ã _Array - –í–´–ü–û–õ–ù–ï–ù–û –≤ Stage38 (List<string>, List<int>, Contains, Any, Count)
5. ‚úÖ –ì–ª—É–±–∏–Ω–∞ maxDepth - –í–´–ü–û–õ–ù–ï–ù–û (–≤—Å–µ –≥–ª—É–±–∏–Ω—ã, batch –≤–∞—Ä–∏–∞–Ω—Ç—ã)
6. ‚úÖ Guid –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã - –í–´–ü–û–õ–ù–ï–ù–û –≤ Stage38 (Guid.Empty, nullable Guid, –≤—Å–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã)

### ‚úÖ –≠—Ç–∞–ø 3: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã - –ü–û–ß–¢–ò –ü–û–õ–ù–û–°–¢–¨–Æ –í–´–ü–û–õ–ù–ï–ù
7. üü° –ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ - –ù–ï –í–´–ü–û–õ–ù–ï–ù–û (—Ç—Ä–µ–±—É–µ—Ç —Å–ª–æ–∂–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π)
8. ‚úÖ –ù–µ–≥–∞—Ç–∏–≤–Ω—ã–µ —Ç–µ—Å—Ç—ã - –í–´–ü–û–õ–ù–ï–ù–û (–≥—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏, –ø—É—Å—Ç—ã–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏)
9. ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å - –í–´–ü–û–õ–ù–ï–ù–û –≤ Stage38 (1000+ –æ–±—ä–µ–∫—Ç–æ–≤, –ø–∞–≥–∏–Ω–∞—Ü–∏—è, —Å–ª–æ–∂–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã)
10. ‚úÖ –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã - –í–´–ü–û–õ–ù–ï–ù–û (SQL wildcards)

## –ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ Stage37

```csharp
// –î–æ–±–∞–≤–∏—Ç—å –ø–æ—Å–ª–µ —Å—Ç—Ä–æ–∫–∏ 94 (–ø–µ—Ä–µ–¥ –°–í–û–î–ù–û–ô –°–¢–ê–¢–ò–°–¢–ò–ö–û–ô)

// ========== –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –¢–ò–ü–´ –î–ê–ù–ù–´–• ==========
logger.LogInformation("üéØ === –¢–ï–°–¢ –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–• –¢–ò–ü–û–í –î–ê–ù–ù–´–• ===");

// DateTime —Ç–µ—Å—Ç—ã
logger.LogInformation("üìÖ DateTime –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã:");
var now = DateTime.Now;
var yesterday = now.AddDays(-1);
var tomorrow = now.AddDays(1);

var afterYesterday = await (await redb.QueryAsync<AnalyticsRecordProps>())
    .Where(a => a.Date > yesterday)
    .ToListAsync();
logger.LogInformation("    Date > –≤—á–µ—Ä–∞: {Count} –∑–∞–ø–∏—Å–µ–π", afterYesterday.Count);

var dateRange = await (await redb.QueryAsync<AnalyticsRecordProps>())
    .Where(a => a.Date >= yesterday && a.Date <= tomorrow)
    .ToListAsync();
logger.LogInformation("    Date –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ [–≤—á–µ—Ä–∞, –∑–∞–≤—Ç—Ä–∞]: {Count} –∑–∞–ø–∏—Å–µ–π", dateRange.Count);

// NULL —Ç–µ—Å—Ç—ã
logger.LogInformation("‚ùì NULL –ø—Ä–æ–≤–µ—Ä–∫–∏:");
var withNote = await (await redb.QueryAsync<AnalyticsRecordProps>())
    .Where(a => a.Note != null)
    .ToListAsync();
logger.LogInformation("    Note != null: {Count} –∑–∞–ø–∏—Å–µ–π", withNote.Count);

var withoutNote = await (await redb.QueryAsync<AnalyticsRecordProps>())
    .Where(a => a.Note == null)
    .ToListAsync();
logger.LogInformation("    Note == null: {Count} –∑–∞–ø–∏—Å–µ–π", withoutNote.Count);

// Boolean —Ç–µ—Å—Ç—ã (–µ—Å–ª–∏ –µ—Å—Ç—å bool –ø–æ–ª—è)
// logger.LogInformation("‚úÖ Boolean –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã:");
// var active = await (await redb.QueryAsync<SomePropsWithBool>())
//     .Where(x => x.IsActive)
//     .ToListAsync();
// logger.LogInformation("    IsActive == true: {Count} –∑–∞–ø–∏—Å–µ–π", active.Count);

// –ì–ª—É–±–∏–Ω–∞ Descendants
logger.LogInformation("üå≥ –ì–ª—É–±–∏–Ω–∞ QueryDescendantsAsync:");
var depth1 = await (await redb.QueryDescendantsAsync<ValidationTestProps>(testObjects.RecRoot, 1))
    .ToListAsync();
logger.LogInformation("    maxDepth=1 (—Ç–æ–ª—å–∫–æ –¥–µ—Ç–∏): {Count} –∑–∞–ø–∏—Å–µ–π", depth1.Count);

var depth3 = await (await redb.QueryDescendantsAsync<ValidationTestProps>(testObjects.RecRoot, 3))
    .ToListAsync();
logger.LogInformation("    maxDepth=3: {Count} –∑–∞–ø–∏—Å–µ–π", depth3.Count);

// –ù–µ–≥–∞—Ç–∏–≤–Ω—ã–µ —Ç–µ—Å—Ç—ã
logger.LogInformation("‚ö†Ô∏è –ì—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏:");
var take0 = await (await redb.QueryAsync<ValidationTestProps>()).Take(0).ToListAsync();
logger.LogInformation("    Take(0): {Count} –∑–∞–ø–∏—Å–µ–π (–æ–∂–∏–¥–∞–µ—Ç—Å—è 0)", take0.Count);

var skip1000 = await (await redb.QueryAsync<ValidationTestProps>()).Skip(1000).ToListAsync();
logger.LogInformation("    Skip(1000): {Count} –∑–∞–ø–∏—Å–µ–π (–æ–∂–∏–¥–∞–µ—Ç—Å—è 0)", skip1000.Count);

var emptyBatch = await (await redb.QueryChildrenAsync<ValidationTestProps>(new RedbObject<ProductTestProps>[0]))
    .ToListAsync();
logger.LogInformation("    QueryChildrenAsync(–ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤): {Count} –∑–∞–ø–∏—Å–µ–π", emptyBatch.Count);
```

## ‚úÖ –î–û–°–¢–ò–ì–ù–£–¢–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤ (Stage37 + Stage38):
- **–ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö**: 95% ‚úÖ (string ‚úÖ, number ‚úÖ, DateTime ‚úÖ, bool ‚úÖ, null ‚úÖ, Guid ‚úÖ, –º–∞—Å—Å–∏–≤—ã ‚úÖ)
- **–ü–æ–∫—Ä—ã—Ç–∏–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤**: 100% ‚úÖ (–≤—Å–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã —Å—Ä–∞–≤–Ω–µ–Ω–∏—è + —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ + MemberAccess)
- **–ü–æ–∫—Ä—ã—Ç–∏–µ –º–µ—Ç–æ–¥–æ–≤**: 100% ‚úÖ (–≤—Å–µ 16 –º–µ—Ç–æ–¥–æ–≤ IRedbQueryable –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã)
- **–ü–æ–∫—Ä—ã—Ç–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤**: 98% ‚úÖ (–≤–∫–ª—é—á–∞—è –≤—Å–µ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ edge cases + –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å)
- **–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–µ—Å—Ç–æ–≤**: 150+ ‚úÖ (–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–µ–≤—ã—à–µ–Ω—ã –æ–∂–∏–¥–∞–Ω–∏—è)

### üéØ –§–∏–Ω–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:
- ‚úÖ **–ö—Ä–∏—Ç–∏—á–Ω—ã–µ —Ç–µ—Å—Ç—ã**: 100% –≤—ã–ø–æ–ª–Ω–µ–Ω–æ
- ‚úÖ **–í–∞–∂–Ω—ã–µ —Ç–µ—Å—Ç—ã**: 100% –≤—ã–ø–æ–ª–Ω–µ–Ω–æ (3 –∏–∑ 3)
- ‚úÖ **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã**: 75% –≤—ã–ø–æ–ª–Ω–µ–Ω–æ (3 –∏–∑ 4, —Ç–æ–ª—å–∫–æ –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã)

## –ó–∞–º–µ—Ç–∫–∏ –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è

### ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:
1. ‚úÖ **DateTime —Ç–µ—Å—Ç—ã** - —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ DateTime —Ñ–æ—Ä–º–∞—Ç–∞ –≤ SQL
2. ‚úÖ **NULL –ø—Ä–æ–≤–µ—Ä–∫–∏** - –ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ nullable —Ç–∏–ø–æ–≤ (string?, long?)
3. ‚úÖ **Boolean –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã** - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ MemberAccess (`p.IsActive`, `!p.IsActive`)
4. ‚úÖ **–ì—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏** - LINQ-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Å –ø—É—Å—Ç—ã–º–∏ –∫–æ–ª–ª–µ–∫—Ü–∏—è–º–∏
5. ‚úÖ **–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ SQL wildcard —Å–∏–º–≤–æ–ª–æ–≤

### üîß –ö–ª—é—á–µ–≤—ã–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è:
- **Stage37**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω PostgresFilterExpressionParser –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ MemberExpression
- **Stage37**: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω PostgresQueryProvider –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ Take(0) –±–µ–∑ SQL –∑–∞–ø—Ä–æ—Å–æ–≤
- **Stage37**: –ò–∑–º–µ–Ω–µ–Ω–æ –ø–æ–≤–µ–¥–µ–Ω–∏–µ batch –º–µ—Ç–æ–¥–æ–≤ —Å –∏—Å–∫–ª—é—á–µ–Ω–∏–π –Ω–∞ –ø—É—Å—Ç—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
- **Stage37**: –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ DateTime –∞–≤—Ç–æ–¥–µ—Ç–µ–∫—Ü–∏–∏ –≤ SQL —Ñ—É–Ω–∫—Ü–∏—è—Ö
- **Stage38**: –°–æ–∑–¥–∞–Ω –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π —Ç–µ—Å—Ç –¥–ª—è –º–∞—Å—Å–∏–≤–æ–≤ (List<T>) —Å Contains, Any, Count
- **Stage38**: –î–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ Guid —Ç–µ—Å—Ç—ã –≤–∫–ª—é—á–∞—è nullable Guid –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã
- **Stage38**: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –º–∞—Å—à—Ç–∞–±–Ω—ã–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (1000+ –æ–±—ä–µ–∫—Ç–æ–≤)

### ‚úÖ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ Stage38:
- ‚úÖ –ú–∞—Å—Å–∏–≤—ã _Array –ø–æ–ª—è (—Ç–µ—Å—Ç—ã Lists<string>, Lists<int>)
- ‚úÖ Guid –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã (== Guid.Empty, != Guid.Empty, nullable Guid)  
- ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (1000+ –æ–±—ä–µ–∫—Ç–æ–≤, –ø–∞–≥–∏–Ω–∞—Ü–∏—è, —Å–ª–æ–∂–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã)

### üü° –û—Å—Ç–∞–≤—à–∏–µ—Å—è –∑–∞–¥–∞—á–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
- –ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ (—Ç—Ä–µ–±—É–µ—Ç —Å–ª–æ–∂–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π)

## üéâ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï: LINQ –°–ò–°–¢–ï–ú–ê –ì–û–¢–û–í–ê –ö –ü–†–û–î–£–ö–¢–ò–í–ù–û–ú–£ –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ!
