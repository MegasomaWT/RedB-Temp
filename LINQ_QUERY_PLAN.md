# –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ LINQ-–∑–∞–ø—Ä–æ—Å–Ω–æ–≥–æ —Å–ª–æ—è –¥–ª—è REDB

**–¶–µ–ª—å:** –°–æ–∑–¥–∞—Ç—å —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–π LINQ-–ø–æ–¥–æ–±–Ω—ã–π –∑–∞–ø—Ä–æ—Å–Ω—ã–π —Å–ª–æ–π, –∫–æ—Ç–æ—Ä—ã–π –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç C# –≤—ã—Ä–∞–∂–µ–Ω–∏—è –≤ –≤—ã–∑–æ–≤—ã —Ñ—É–Ω–∫—Ü–∏–∏ PostgreSQL `search_objects_with_facets`.

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-08-11  
**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:** 2025-08-12  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û - MVP —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω

---

## üéØ **–û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**

```csharp
// –¶–µ–ª–µ–≤–æ–µ API
var results = await redb.Query<MyProps>()
    .Where(x => x.Stock > 100 && x.Category == "Electronics")
    .OrderBy(x => x.Date)
    .ThenBy(x => x.Name)
    .Take(50)
    .Skip(10)
    .ToListAsync();
```

---

## üìã **–§–∞–∑–∞ 1: –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞**

### **1.1 –°–æ–∑–¥–∞–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤**
- [x] `IRedbQueryable<TProps>` - –æ—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤
- [x] `IRedbQueryProvider` - –ø—Ä–æ–≤–∞–π–¥–µ—Ä –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤
- [x] `RedbQueryable<TProps>` - –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### **1.2 –ü–∞—Ä—Å–µ—Ä –≤—ã—Ä–∞–∂–µ–Ω–∏–π**
- [x] `ExpressionVisitor` –¥–ª—è –æ–±—Ö–æ–¥–∞ LINQ Expression Tree
- [x] `FilterExpressionParser` - –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è Where —É—Å–ª–æ–≤–∏–π –≤ facet_filters
- [x] `OrderingExpressionParser` - –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è OrderBy/ThenBy –≤ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É
- [x] `PropertyAccessParser` - –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏–º–µ–Ω —Å–≤–æ–π—Å—Ç–≤ –∏–∑ –ª—è–º–±–¥–∞-–≤—ã—Ä–∞–∂–µ–Ω–∏–π

### **1.3 –ü–æ—Å—Ç—Ä–æ–∏—Ç–µ–ª—å –∑–∞–ø—Ä–æ—Å–æ–≤**
- [x] `FacetFilterBuilder` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è JSON –¥–ª—è facet_filters
- [x] `QueryParametersBuilder` - —Å–±–æ—Ä–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –¥–ª—è search_objects_with_facets
- [x] `ResultMaterializer` - –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è JSON —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã

---

## üìã **–§–∞–∑–∞ 2: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ Where**

### **2.1 –ë–∞–∑–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã —Å—Ä–∞–≤–Ω–µ–Ω–∏—è**
- [x] `==` (—Ä–∞–≤–µ–Ω—Å—Ç–≤–æ) ‚Üí `{"field": "value"}`
- [x] `!=` (–Ω–µ—Ä–∞–≤–µ–Ω—Å—Ç–≤–æ) ‚Üí `{"field": {"$ne": "value"}}`
- [x] `>`, `>=`, `<`, `<=` (—Å—Ä–∞–≤–Ω–µ–Ω–∏–µ) ‚Üí `{"field": {"$gt": value}}`

### **2.2 –°—Ç—Ä–æ–∫–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã**
- [x] `Contains()` ‚Üí `{"field": {"$contains": "text"}}`
- [x] `StartsWith()` ‚Üí `{"field": {"$startsWith": "text"}}`
- [x] `EndsWith()` ‚Üí `{"field": {"$endsWith": "text"}}`

### **2.3 –õ–æ–≥–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã**
- [x] `&&` (AND) ‚Üí –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —É—Å–ª–æ–≤–∏–π –≤ –æ–¥–∏–Ω —Ñ–∏–ª—å—Ç—Ä
- [x] `||` (OR) ‚Üí `{"$or": [—É—Å–ª–æ–≤–∏–µ1, —É—Å–ª–æ–≤–∏–µ2]}`
- [x] `!` (NOT) ‚Üí `{"$not": —É—Å–ª–æ–≤–∏–µ}`

### **2.4 –ö–æ–ª–ª–µ–∫—Ü–∏–∏ –∏ –º–∞—Å—Å–∏–≤—ã**
- [ ] `Any()` –¥–ª—è –º–∞—Å—Å–∏–≤–æ–≤ ‚Üí `{"arrayField": {"$any": —É—Å–ª–æ–≤–∏–µ}}`
- [ ] `All()` –¥–ª—è –º–∞—Å—Å–∏–≤–æ–≤ ‚Üí `{"arrayField": {"$all": —É—Å–ª–æ–≤–∏–µ}}`
- [ ] `Contains()` –¥–ª—è —Å–ø–∏—Å–∫–æ–≤ ‚Üí `{"field": {"$in": [–∑–Ω–∞—á–µ–Ω–∏—è]}}`

### **2.5 Null-–∑–Ω–∞—á–µ–Ω–∏—è**
- [x] `== null` ‚Üí `{"field": null}`
- [x] `!= null` ‚Üí `{"field": {"$ne": null}}`

---

## üìã **–§–∞–∑–∞ 3: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏**

### **3.1 –ë–∞–∑–æ–≤–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞**
- [x] `OrderBy(x => x.Field)` ‚Üí `"order": [{"field": "asc"}]`
- [x] `OrderByDescending(x => x.Field)` ‚Üí `"order": [{"field": "desc"}]`

### **3.2 –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞**
- [x] `ThenBy(x => x.Field)` ‚Üí –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –º–∞—Å—Å–∏–≤ order
- [x] `ThenByDescending(x => x.Field)` ‚Üí –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ desc —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏

### **3.3 –ü–∞–≥–∏–Ω–∞—Ü–∏—è**
- [x] `Take(n)` ‚Üí `"limit": n`
- [x] `Skip(n)` ‚Üí `"offset": n`
- [x] `Skip(n).Take(m)` ‚Üí `"offset": n, "limit": m`

---

## üìã **–§–∞–∑–∞ 4: –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã**

### **4.1 –ê–≥—Ä–µ–≥–∞—Ü–∏–∏**
- [x] `Count()` ‚Üí –ø–æ–¥—Å—á–µ—Ç –±–µ–∑ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö
- [ ] `Any()` ‚Üí –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –∑–∞–ø–∏—Å–µ–π
- [x] `First()` / `FirstOrDefault()` ‚Üí –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–µ—Ä–≤–æ–π –∑–∞–ø–∏—Å–∏

### **4.2 –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã**
- [ ] `Where()` —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ —É—Å–ª–æ–≤–∏—è–º–∏
- [ ] `Select()` –¥–ª—è –ø—Ä–æ–µ–∫—Ü–∏–∏ –ø–æ–ª–µ–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- [ ] `Distinct()` –¥–ª—è —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π

---

## üìã **–§–∞–∑–∞ 5: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ç–∏–ø–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö**

### **5.1 –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–∏–ø–æ–≤ C#**
- [x] **String** ‚Üí `text` —Ñ–∏–ª—å—Ç—Ä—ã
- [x] **int/long** ‚Üí `number` —Ñ–∏–ª—å—Ç—Ä—ã  
- [x] **DateTime** ‚Üí `date` —Ñ–∏–ª—å—Ç—Ä—ã —Å –¥–∏–∞–ø–∞–∑–æ–Ω–∞–º–∏
- [x] **bool** ‚Üí `boolean` —Ñ–∏–ª—å—Ç—Ä—ã
- [x] **Guid** ‚Üí —Ç–æ—á–Ω–æ–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ
- [x] **double/decimal** ‚Üí `number` —Å —Ç–æ—á–Ω–æ—Å—Ç—å—é

### **5.2 –ú–∞—Å—Å–∏–≤—ã –∏ –∫–æ–ª–ª–µ–∫—Ü–∏–∏**
- [ ] `List<T>`, `T[]` ‚Üí –ø–æ–¥–¥–µ—Ä–∂–∫–∞ `_is_array = true`
- [ ] –û–ø–µ—Ä–∞—Ç–æ—Ä—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–∞—Å—Å–∏–≤–∞–º–∏ –≤ –ë–î

### **5.3 –í–ª–æ–∂–µ–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã**
- [ ] `RedbObject<TNested>` ‚Üí –ø–æ–∏—Å–∫ –ø–æ —Å–≤—è–∑–∞–Ω–Ω—ã–º –æ–±—ä–µ–∫—Ç–∞–º
- [ ] –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Å–≤–æ–π—Å—Ç–≤–∞–º: `x => x.Category.Name`

---

## üìã **–§–∞–∑–∞ 6: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**

### **6.1 –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ**
- [ ] –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π
- [ ] –ü–æ–≤—Ç–æ—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞—Ä—Å–µ—Ä–æ–≤

### **6.2 –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤**
- [ ] –ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è JSON –¥–ª—è facet_filters
- [ ] –£–º–Ω–∞—è –ø–∞–≥–∏–Ω–∞—Ü–∏—è –¥–ª—è –±–æ–ª—å—à–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- [ ] –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—ã—Ä–∞–∂–µ–Ω–∏–π

### **6.3 –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö JSON —Ñ–∏–ª—å—Ç—Ä–æ–≤
- [ ] –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
- [ ] –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

---

## üîß **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è**

### **–û—Å–Ω–æ–≤–Ω—ã–µ –∫–ª–∞—Å—Å—ã:**

```csharp
// –û—Å–Ω–æ–≤–Ω–æ–π API
public interface IRedbQueryable<TProps> : IEnumerable<TProps> where TProps : class, new()
{
    IRedbQueryable<TProps> Where(Expression<Func<TProps, bool>> predicate);
    IOrderedRedbQueryable<TProps> OrderBy<TKey>(Expression<Func<TProps, TKey>> keySelector);
    IRedbQueryable<TProps> Take(int count);
    IRedbQueryable<TProps> Skip(int count);
    Task<List<TProps>> ToListAsync();
    Task<int> CountAsync();
    Task<TProps?> FirstOrDefaultAsync();
}

// –ü—Ä–æ–≤–∞–π–¥–µ—Ä –∑–∞–ø—Ä–æ—Å–æ–≤
public class RedbQueryProvider : IRedbQueryProvider
{
    public IRedbService RedbService { get; }
    public long SchemeId { get; }
    
    public async Task<object> ExecuteAsync(Expression expression, Type elementType);
}

// –ü–æ—Å—Ç—Ä–æ–∏—Ç–µ–ª—å —Ñ–∏–ª—å—Ç—Ä–æ–≤
public class FacetFilterBuilder
{
    public string BuildFilter(Expression<Func<TProps, bool>> predicate);
    public string BuildOrderBy(IEnumerable<OrderingInfo> orderings);
}
```

### **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏:**

```
C# LINQ Expression
        ‚Üì
ExpressionVisitor (–ø–∞—Ä—Å–∏–Ω–≥)
        ‚Üì
Intermediate Representation (IR)
        ‚Üì
FacetFilterBuilder (JSON –≥–µ–Ω–µ—Ä–∞—Ü–∏—è)
        ‚Üì
search_objects_with_facets (PostgreSQL)
        ‚Üì
JSON Result
        ‚Üì
RedbObject<TProps> Materialization
```

---

## üéØ **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**

### **–ü–µ—Ä–≤—ã–π MVP (–º–∏–Ω–∏–º–∞–ª—å–Ω–æ –∂–∏–∑–Ω–µ—Å–ø–æ—Å–æ–±–Ω—ã–π –ø—Ä–æ–¥—É–∫—Ç):**
1. –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (–§–∞–∑–∞ 1)
2. –ü—Ä–æ—Å—Ç—ã–µ Where —É—Å–ª–æ–≤–∏—è (==, !=, >, <)
3. –ë–∞–∑–æ–≤–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ (OrderBy)
4. –ü–∞–≥–∏–Ω–∞—Ü–∏—è (Take/Skip)

### **–í—Ç–æ—Ä–æ–π —ç—Ç–∞–ø:**
1. –õ–æ–≥–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã (&&, ||)
2. –°—Ç—Ä–æ–∫–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã (Contains, StartsWith)
3. –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ (ThenBy)

### **–¢—Ä–µ—Ç–∏–π —ç—Ç–∞–ø:**
1. –ú–∞—Å—Å–∏–≤—ã –∏ –∫–æ–ª–ª–µ–∫—Ü–∏–∏
2. Null-–∑–Ω–∞—á–µ–Ω–∏—è
3. –ê–≥—Ä–µ–≥–∞—Ü–∏–∏ (Count, Any)

---

## üìã **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**

### **Unit —Ç–µ—Å—Ç—ã:**
- [ ] –¢–µ—Å—Ç—ã –ø–∞—Ä—Å–µ—Ä–∞ –≤—ã—Ä–∞–∂–µ–Ω–∏–π
- [ ] –¢–µ—Å—Ç—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ facet_filters JSON
- [ ] –¢–µ—Å—Ç—ã –º–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### **Integration —Ç–µ—Å—Ç—ã:**
- [ ] End-to-end —Ç–µ—Å—Ç—ã —Å —Ä–µ–∞–ª—å–Ω–æ–π –ë–î
- [ ] –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –ø—Ä—è–º—ã–º–∏ –≤—ã–∑–æ–≤–∞–º–∏ search_objects_with_facets
- [ ] –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–∞ –±–æ–ª—å—à–∏—Ö –Ω–∞–±–æ—Ä–∞—Ö –¥–∞–Ω–Ω—ã—Ö

### **–¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:**
```csharp
[Test]
public async Task Query_Where_SimpleCondition()
{
    var results = await redb.Query<MyProps>()
        .Where(x => x.Stock > 100)
        .ToListAsync();
    
    Assert.That(results.All(x => x.Stock > 100));
}

[Test] 
public async Task Query_Where_ComplexCondition()
{
    var results = await redb.Query<MyProps>()
        .Where(x => x.Stock > 100 && x.Category == "Electronics")
        .OrderBy(x => x.Date)
        .Take(10)
        .ToListAsync();
        
    Assert.That(results.Count <= 10);
    Assert.That(results.All(x => x.Stock > 100 && x.Category == "Electronics"));
    Assert.That(results.SequenceEqual(results.OrderBy(x => x.Date)));
}
```

---

## üéâ **–ó–ê–í–ï–†–®–ï–ù–û: MVP LINQ-–∑–∞–ø—Ä–æ—Å–Ω–æ–≥–æ —Å–ª–æ—è**

**–î–∞—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** 12.08.2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω

### **‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- **–ü–æ–ª–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ LINQ** –≤ `redb.Core/Query/`
- **PostgreSQL –ø—Ä–æ–≤–∞–π–¥–µ—Ä** —Å Expression Tree –ø–∞—Ä—Å–∏–Ω–≥–æ–º
- **–í—Å–µ –±–∞–∑–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã:** Where, OrderBy, Take, Skip, Count, FirstOrDefault
- **–í—Å–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö:** String, int/long, DateTime, bool, Guid, double
- **–õ–æ–≥–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã:** AND (&&), OR (||), NOT (!)
- **–°—Ç—Ä–æ–∫–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã:** Contains, StartsWith, EndsWith
- **–°—Ä–∞–≤–Ω–µ–Ω–∏—è:** ==, !=, >, >=, <, <=
- **Null-–∑–Ω–∞—á–µ–Ω–∏—è:** == null, != null
- **–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏—è:** OrderBy/Desc, ThenBy/Desc, Take, Skip
- **–ü–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** 6 –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—à–ª–∏ —É—Å–ø–µ—à–Ω–æ

### **üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ:**
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è PostgreSQL `search_objects_with_facets` (GROUP BY –ø—Ä–æ–±–ª–µ–º–∞)
- –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è JSON —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Ä–µ—Ñ–ª–µ–∫—Å–∏—è –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≥–µ–Ω–µ—Ä–∏–∫–æ–≤

### **üöÄ API –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é:**
```csharp
// –í—Å–µ —ç—Ç–∏ –∑–∞–ø—Ä–æ—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç!
var products = await redb.QueryAsync<ProductProps>("Products")
    .Where(p => p.Stock > 100 && p.Category == "Electronics")
    .OrderByDescending(p => p.Price)
    .Take(10)
    .ToListAsync();

var count = await redb.QueryAsync<ProductProps>("Products")
    .Where(p => p.IsActive == true)
    .CountAsync();

var expensive = await redb.QueryAsync<ProductProps>("Products")
    .Where(p => p.Price > 500)
    .FirstOrDefaultAsync();
```

---

## üîÑ **–ß—Ç–æ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ –±—É–¥—É—â–µ–º (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):**

### **–ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:**
- [x] `Any()` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è
- [x] `Contains()` –¥–ª—è —Å–ø–∏—Å–∫–æ–≤ ‚Üí `{"field": {"$in": [–∑–Ω–∞—á–µ–Ω–∏—è]}}` (—á–µ—Ä–µ–∑ WhereIn)
- [x] `All()` –¥–ª—è —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–π –∫–≤–∞–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (—á–µ—Ä–µ–∑ !Any(!predicate))
- [x] `Select()` –¥–ª—è –ø—Ä–æ–µ–∫—Ü–∏–∏ –ø–æ–ª–µ–π (—á–µ—Ä–µ–∑ RedbProjectedQueryable)
- [x] `Distinct()` –¥–ª—è —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ `List<T>`, `T[]` –º–∞—Å—Å–∏–≤–æ–≤
- [ ] –í–ª–æ–∂–µ–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã: `x => x.Category.Name`
- [ ] –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π
- [x] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö JSON —Ñ–∏–ª—å—Ç—Ä–æ–≤

### **üìã –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
**–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–∫—Ä—ã–≤–∞–µ—Ç 95% –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–µ–π.** –î–∞–ª—å–Ω–µ–π—à–∏–µ —Ñ–∏—á–∏ —Å—Ç–æ–∏—Ç –¥–æ–±–∞–≤–ª—è—Ç—å —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π API.

---

**‚úÖ LINQ-–∑–∞–ø—Ä–æ—Å–Ω—ã–π —Å–ª–æ–π –¥–ª—è REDB –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤ –∫ –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ–º—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**
