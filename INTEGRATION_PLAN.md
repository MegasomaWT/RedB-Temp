# üöÄ –ü–ª–∞–Ω –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å–∏—Å—Ç–µ–º—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤ RedbService

## üéØ **–¶–µ–ª—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏**

–ü—Ä–∏–º–µ–Ω–∏—Ç—å —Å–æ–∑–¥–∞–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∫ —Ä–µ–∞–ª—å–Ω–æ–º—É `RedbService` –¥–ª—è —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º:
- ‚ùå –ù–µ–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- ‚ùå –û—à–∏–±–∫–∏ –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤  
- ‚ùå –†–∞–∑–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –≥–ª—É–±–∏–Ω—ã –∑–∞–≥—Ä—É–∑–∫–∏ –≤ —Ä–∞–∑–Ω—ã—Ö –º–µ—Ç–æ–¥–∞—Ö
- ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

## üìã **–≠—Ç–∞–ø—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏**

### **–≠—Ç–∞–ø 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤** ‚úÖ –ì–û–¢–û–í–û
- [x] `RedbServiceConfiguration` - –æ—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- [x] `RedbServiceConfigurationBuilder` - builder –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- [x] `PredefinedConfigurations` - –≥–æ—Ç–æ–≤—ã–µ –ø—Ä–æ—Ñ–∏–ª–∏
- [x] `ConfigurationValidator` - –≤–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫
- [x] `IConfiguration` –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è - extension –º–µ—Ç–æ–¥—ã
- [x] `ServiceCollectionExtensions` - DI —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è

### **–≠—Ç–∞–ø 2: –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è IRedbService** ‚úÖ –ì–û–¢–û–í–û
- [x] –î–æ–±–∞–≤–∏—Ç—å —Å–≤–æ–π—Å—Ç–≤–æ `Configuration` –≤ `IRedbService`
- [x] –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
- [x] –û–±–Ω–æ–≤–∏—Ç—å —Å–∏–≥–Ω–∞—Ç—É—Ä—ã –º–µ—Ç–æ–¥–æ–≤ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (nullable –ø–∞—Ä–∞–º–µ—Ç—Ä—ã)

### **–≠—Ç–∞–ø 3: –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è RedbService (redb.Core.Postgres)** ‚úÖ –ì–û–¢–û–í–û
- [x] –í–Ω–µ–¥—Ä–∏—Ç—å `RedbServiceConfiguration` –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
- [x] –ü—Ä–∏–º–µ–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- [x] –ü—Ä–∏–º–µ–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≥–ª—É–±–∏–Ω—ã –∑–∞–≥—Ä—É–∑–∫–∏
- [x] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤
- [x] –ü—Ä–∏–º–µ–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∏ –∞—É–¥–∏—Ç–∞ (AutoSetModifyDate)

### **–≠—Ç–∞–ø 4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏** ‚úÖ –ì–û–¢–û–í–û
- [x] –°–æ–∑–¥–∞–Ω `Stage28_ConfigurationSystemTest`
- [x] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- [x] –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞ —Ä–∞–±–æ—Ç–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ `AutoResetOnDelete`
- [x] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Ä–∞–±–æ—Ç–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- [x] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –º–µ—Ç–æ–¥—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### **–≠—Ç–∞–ø 5: –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤** ‚úÖ –ì–û–¢–û–í–û
- [x] `PostgresObjectStorageProvider` - –ø—Ä–∏–º–µ–Ω–∏—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ —É–¥–∞–ª–µ–Ω–∏—è
- [x] `PostgresSchemeSyncProvider` - –ø—Ä–∏–º–µ–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å—Ö–µ–º
- [x] `PostgresPermissionProvider` - –ø—Ä–∏–º–µ–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- [x] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è `AutoSwitchToInsert` - –∫–ª—é—á–µ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è!
- [x] –ü—Ä–∏–º–µ–Ω–µ–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö —Å—Ö–µ–º
- [x] –ü—Ä–∏–º–µ–Ω–µ–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∞—É–¥–∏—Ç–∞ –∏ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è

### **–≠—Ç–∞–ø 6: –°–æ–∑–¥–∞–Ω–∏–µ DI Extensions** ‚úÖ –ì–û–¢–û–í–û
- [x] –°–æ–∑–¥–∞—Ç—å extension –º–µ—Ç–æ–¥—ã –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ RedbService —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
- [x] –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –ø—Ä–æ—Ñ–∏–ª–µ–π –≤ DI
- [x] –°–æ–∑–¥–∞—Ç—å –º–µ—Ç–æ–¥—ã –¥–ª—è hot-reload –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- [x] –°–æ–∑–¥–∞—Ç—å –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è DI extensions

### **–≠—Ç–∞–ø 7: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –ø—Ä–∏–º–µ—Ä—ã** ‚úÖ –ì–û–¢–û–í–û
- [x] –°–æ–∑–¥–∞—Ç—å migration guide –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–æ–¥–∞
- [x] –°–æ–∑–¥–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è DI
- [x] –°–æ–∑–¥–∞—Ç—å –ø—Ä–∏–º–µ—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
- [x] –°–æ–∑–¥–∞—Ç—å –ø–æ–ª–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é —Å–∏—Å—Ç–µ–º—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- [x] –°–æ–∑–¥–∞—Ç—å –∏—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç –æ —É—Å–ø–µ—à–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

## üîß **–î–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏**

### **2.1 –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è IRedbService**

```csharp
public interface IRedbService : IObjectStorageProvider, ISchemeSyncProvider, 
    ITreeProvider, IPermissionProvider, IUserProvider, IRoleProvider, 
    IValidationProvider, IQueryProvider
{
    // === –ù–û–í–û–ï: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è ===
    
    /// <summary>
    /// –¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–∞
    /// </summary>
    RedbServiceConfiguration Configuration { get; }
    
    /// <summary>
    /// –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
    /// </summary>
    void UpdateConfiguration(Action<RedbServiceConfiguration> configure);
    
    /// <summary>
    /// –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —á–µ—Ä–µ–∑ builder
    /// </summary>
    void UpdateConfiguration(Action<RedbServiceConfigurationBuilder> configureBuilder);
    
    // === –û–ë–ù–û–í–õ–ï–ù–ù–´–ï –ú–ï–¢–û–î–´: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ===
    
    // –í–º–µ—Å—Ç–æ –∂–µ—Å—Ç–∫–æ –∑–∞–¥–∞–Ω–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –∏—Å–ø–æ–ª—å–∑—É–µ–º –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
    Task<RedbObject<TProps>?> LoadAsync<TProps>(long id, int? depth = null, bool? checkPermissions = null) where TProps : class;
    Task<long> SaveAsync<TProps>(RedbObject<TProps> obj, bool? checkPermissions = null) where TProps : class;
    Task<bool> DeleteAsync(long id, bool? checkPermissions = null);
    Task<bool> DeleteAsync(RedbObject obj, bool? checkPermissions = null);
    
    // –ò —Ç–∞–∫ –¥–∞–ª–µ–µ –¥–ª—è –≤—Å–µ—Ö –º–µ—Ç–æ–¥–æ–≤...
}
```

### **2.2 –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è RedbService**

```csharp
public class RedbService : IRedbService
{
    private RedbServiceConfiguration _configuration;
    
    // === –ù–û–í–û–ï: –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π ===
    public RedbService(
        RedbContext context,
        IRedbSecurityContext securityContext,
        RedbServiceConfiguration? configuration = null)
    {
        _context = context;
        _securityContext = securityContext;
        _configuration = configuration ?? new RedbServiceConfiguration();
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
        InitializeProviders();
    }
    
    // === –ù–û–í–û–ï: –°–≤–æ–π—Å—Ç–≤–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ ===
    public RedbServiceConfiguration Configuration => _configuration;
    
    public void UpdateConfiguration(Action<RedbServiceConfiguration> configure)
    {
        configure(_configuration);
        // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
        UpdateProvidersConfiguration();
    }
    
    public void UpdateConfiguration(Action<RedbServiceConfigurationBuilder> configureBuilder)
    {
        var builder = new RedbServiceConfigurationBuilder(_configuration);
        configureBuilder(builder);
        _configuration = builder.Build();
        UpdateProvidersConfiguration();
    }
    
    // === –û–ë–ù–û–í–õ–ï–ù–ù–´–ï –ú–ï–¢–û–î–´: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ===
    
    public async Task<RedbObject<TProps>?> LoadAsync<TProps>(
        long id, 
        int? depth = null, 
        bool? checkPermissions = null) where TProps : class
    {
        // –ò—Å–ø–æ–ª—å–∑—É–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∫–∞–∫ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
        var effectiveDepth = depth ?? _configuration.DefaultLoadDepth;
        var effectiveCheckPermissions = checkPermissions ?? _configuration.DefaultCheckPermissionsOnLoad;
        
        return await _objectStorage.LoadAsync<TProps>(id, effectiveDepth, effectiveCheckPermissions);
    }
    
    public async Task<long> SaveAsync<TProps>(
        RedbObject<TProps> obj, 
        bool? checkPermissions = null) where TProps : class
    {
        var effectiveCheckPermissions = checkPermissions ?? _configuration.DefaultCheckPermissionsOnSave;
        
        // === –ù–û–í–û–ï: –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ ===
        if (obj.id > 0)
        {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ –æ–±—ä–µ–∫—Ç
            var exists = await _objectStorage.LoadAsync<TProps>(obj.id, 0, false) != null;
            
            if (!exists)
            {
                // –ü—Ä–∏–º–µ–Ω—è–µ–º —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤
                switch (_configuration.MissingObjectStrategy)
                {
                    case MissingObjectStrategy.AutoSwitchToInsert:
                        obj.id = 0; // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ INSERT
                        break;
                    case MissingObjectStrategy.ReturnNull:
                        return 0;
                    case MissingObjectStrategy.ThrowException:
                    default:
                        throw new InvalidOperationException($"Object with id {obj.id} not found");
                }
            }
        }
        
        return await _objectStorage.SaveAsync(obj, effectiveCheckPermissions);
    }
    
    public async Task<bool> DeleteAsync(RedbObject obj, bool? checkPermissions = null)
    {
        var effectiveCheckPermissions = checkPermissions ?? _configuration.DefaultCheckPermissionsOnDelete;
        
        var result = await _objectStorage.DeleteAsync(obj.id, effectiveCheckPermissions);
        
        // === –ù–û–í–û–ï: –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Å–±—Ä–æ—Å–∞ ID ===
        if (result && _configuration.IdResetStrategy == ObjectIdResetStrategy.AutoResetOnDelete)
        {
            obj.id = 0; // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–±—Ä–∞—Å—ã–≤–∞–µ–º ID
        }
        
        return result;
    }
}
```

### **2.3 –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è PostgresObjectStorageProvider**

```csharp
public class PostgresObjectStorageProvider : IObjectStorageProvider
{
    private readonly RedbServiceConfiguration _configuration;
    
    public PostgresObjectStorageProvider(
        RedbContext context, 
        IRedbSecurityContext securityContext,
        RedbServiceConfiguration configuration)
    {
        _context = context;
        _securityContext = securityContext;
        _configuration = configuration;
    }
    
    public async Task<long> SaveAsync<TProps>(RedbObject<TProps> obj, bool checkPermissions = false) where TProps : class
    {
        // === –ü–†–ò–ú–ï–ù–ï–ù–ò–ï –ù–ê–°–¢–†–û–ï–ö –ê–£–î–ò–¢–ê ===
        if (_configuration.AutoSetModifyDate)
        {
            obj.date_modify = DateTime.Now;
        }
        
        // === –ü–†–ò–ú–ï–ù–ï–ù–ò–ï –ù–ê–°–¢–†–û–ï–ö –í–ê–õ–ò–î–ê–¶–ò–ò ===
        if (_configuration.EnableDataValidation)
        {
            // –í—ã–ø–æ–ª–Ω—è–µ–º –≤–∞–ª–∏–¥–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö
            await ValidateObjectData(obj);
        }
        
        // === –ü–†–ò–ú–ï–ù–ï–ù–ò–ï –ù–ê–°–¢–†–û–ï–ö –°–•–ï–ú ===
        if (obj.scheme_id == 0 && _configuration.AutoSyncSchemesOnSave)
        {
            obj.scheme_id = await _schemeSync.SyncSchemeAsync<TProps>();
        }
        
        // –û—Å—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è...
        
        // === –ü–†–ò–ú–ï–ù–ï–ù–ò–ï –ù–ê–°–¢–†–û–ï–ö –•–ï–®–ò–†–û–í–ê–ù–ò–Ø ===
        if (_configuration.AutoRecomputeHash)
        {
            obj.hash = ComputeObjectHash(obj);
        }
        
        return await SaveObjectToDatabase(obj, checkPermissions);
    }
}
```

## üéØ **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**

### **–í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–∫—Ä–∏—Ç–∏—á–Ω–æ)**
1. **–ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è IRedbService** - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞ Configuration
2. **–ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è RedbService** - –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
3. **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏** - —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è checkPermissions –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
4. **–°—Ç—Ä–∞—Ç–µ–≥–∏–∏ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤** - —Ä–µ—à–µ–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ–±–ª–µ–º—ã

### **–°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–≤–∞–∂–Ω–æ)**
5. **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≥–ª—É–±–∏–Ω—ã –∑–∞–≥—Ä—É–∑–∫–∏** - —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è depth –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
6. **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å—Ö–µ–º** - –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ AutoSyncSchemesOnSave
7. **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏** - –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ EnableDataValidation
8. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤** - –ø–µ—Ä–µ–¥–∞—á–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### **–ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ)**
9. **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è** - –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
10. **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∞—É–¥–∏—Ç–∞** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞—Ç—ã –∏ —Ö–µ—à–∏
11. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
12. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** - –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

## üö® **–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è**

### **–ü—Ä–æ–±–ª–µ–º–∞ 1: Breaking Changes**
**–†–µ—à–µ–Ω–∏–µ:** –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ–±—Ä–∞—Ç–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —á–µ—Ä–µ–∑ nullable –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
```csharp
// –°—Ç–∞—Ä—ã–π –∫–æ–¥ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
await redb.LoadAsync<TestProps>(id, 10, true);

// –ù–æ–≤—ã–π –∫–æ–¥ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
await redb.LoadAsync<TestProps>(id); // –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Configuration.DefaultLoadDepth –∏ DefaultCheckPermissionsOnLoad
```

### **–ü—Ä–æ–±–ª–µ–º–∞ 2: DI —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è**
**–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞—Ç—å extension –º–µ—Ç–æ–¥—ã –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
```csharp
// –í Program.cs
builder.Services.AddRedbService(builder.Configuration);
// –ò–ª–∏
builder.Services.AddRedbService("Production");
// –ò–ª–∏
builder.Services.AddRedbService(config => config.ForDevelopment());
```

### **–ü—Ä–æ–±–ª–µ–º–∞ 3: –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**
**–†–µ—à–µ–Ω–∏–µ:** –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ –ª–µ–Ω–∏–≤–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤

## ‚úÖ **–ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏**

### **–û—Å–Ω–æ–≤–Ω—ã–µ —ç—Ç–∞–ø—ã (1-4) - –ó–ê–í–ï–†–®–ï–ù–´:**
1. ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç —É—Å–ø–µ—à–Ω–æ
2. ‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞
3. ‚úÖ –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
4. ‚úÖ –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã
5. ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–µ —É—Ö—É–¥—à–∏–ª–∞—Å—å

### **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —ç—Ç–∞–ø—ã (5-7) - –ó–ê–í–ï–†–®–ï–ù–´:**
6. ‚úÖ –ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã —Å —Å–∏—Å—Ç–µ–º–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
7. ‚úÖ DI Extensions —Å–æ–∑–¥–∞–Ω—ã —Å 8 —Å–ø–æ—Å–æ–±–∞–º–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
8. ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ–ø–æ–ª–Ω–µ–Ω–∞ –ø–æ–¥—Ä–æ–±–Ω—ã–º–∏ –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∏ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞–º–∏

## üéâ **–ü–†–û–ï–ö–¢ –ü–û–õ–ù–û–°–¢–¨–Æ –ó–ê–í–ï–†–®–ï–ù!**

### **‚úÖ –í–°–ï –¶–ï–õ–ò –î–û–°–¢–ò–ì–ù–£–¢–´:**
- ‚úÖ **–ï–¥–∏–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ** –ø—Ä–æ–±–ª–µ–º—ã —Å —É–¥–∞–ª–µ–Ω–Ω—ã–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏
- ‚úÖ **–ì–∏–±–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
- ‚úÖ **Enterprise-ready** —Ä–µ—à–µ–Ω–∏–µ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π appsettings.json
- ‚úÖ **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∫–æ–¥–æ–º

### **üèÜ –§–ò–ù–ê–õ–¨–ù–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´:**
- ‚úÖ **26/26 —ç—Ç–∞–ø–æ–≤ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è** –ø—Ä–æ—Ö–æ–¥—è—Ç —É—Å–ø–µ—à–Ω–æ (100%)
- ‚úÖ **–í—Å–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç:** AutoResetOnDelete, AutoSwitchToInsert
- ‚úÖ **–ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤** —Å —Å–∏—Å—Ç–µ–º–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- ‚úÖ **8 —Å–ø–æ—Å–æ–±–æ–≤ DI —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏** –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
- ‚úÖ **–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** –∏ –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### **üöÄ REDB –ü–†–ï–í–†–ê–¢–ò–õ–°–Ø –í –ü–û–õ–ù–û–¶–ï–ù–ù–û–ï ENTERPRISE –†–ï–®–ï–ù–ò–ï!**

**–°–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —É—Å–ø–µ—à–Ω–æ —Ä–µ—à–∏–ª–∞ –≤—Å–µ –ø–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ –∏ –≤—ã–≤–µ–ª–∞ REDB –Ω–∞ –Ω–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å!** üéØ‚ú®
